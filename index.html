<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>صدقة جارية لروح أجدادي (رحمهم الله)</title>
  <meta name="description" content="موقع صدقة جارية لأجدادي يضم القرآن الكريم، وأذكار، وأدعية، وعدّاد تسبيح، وشجرة أجر تفاعلية." />
  <style>
    :root{
      --bg:#f7fafc;
      --card:#ffffff;
      --ink:#1f2937;
      --muted:#6b7280;
      --primary:#0ea5e9;
      --primary-ink:#0b5f82;
      --accent:#22c55e;
      --shadow:0 10px 20px rgba(0,0,0,.08);
      --radius:18px;
      --radius-sm:14px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:"Tajawal","Segoe UI",system-ui,-apple-system,sans-serif;line-height:1.7}
    a{color:var(--primary);text-decoration:none}
    a:hover{text-decoration:underline}


  .wrap{max-width:1100px;margin:auto;padding:clamp(14px,2vw,24px)}


.names-grid-fixed {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* عمودين */
    grid-template-rows: repeat(2, auto);   /* صفين */
    gap: 15px;
    margin: 20px 0;
    max-width: 500px;
    margin-inline: auto;
  }

  .names-grid-fixed h5 {
    margin: 0;
    padding: 12px;
    background: rgba(255,255,255,0.15);
    border-radius: 12px;
    font-size: clamp(14px, 2vw, 16px);
    text-align: center;
  }


    header.hero{
      background:linear-gradient(135deg,#38bdf8, #06b6d4);
      color:#fff;padding:32px 18px;border-bottom-left-radius:28px;border-bottom-right-radius:28px;box-shadow:var(--shadow);
    }
    .hero h1{margin:.2rem 0;font-size:clamp(22px,3.6vw,34px);font-weight:800}
    .hero h5{margin:.3rem 0 0;font-size:clamp(14px,2.2vw,18px);opacity:.95}
    .grid{
      display:grid;gap:18px;margin-top:20px;
      grid-template-columns:repeat(12,1fr);
    }
    .card{
      background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px;
    }
    .card h2{margin:0 0 10px;font-size:clamp(18px,2.4vw,22px);color:var(--primary-ink)}
    .muted{color:var(--muted)}
    .btn{
      display:inline-flex;align-items:center;gap:8px;border:none;border-radius:12px;padding:10px 14px;cursor:pointer;
      background:var(--primary);color:#fff;font-weight:600;transition:.25s box-shadow,.25s transform;
    }
    .btn:hover{transform:translateY(-1px);box-shadow:var(--shadow)}
    .btn.secondary{background:#10b981}
    .btn.ghost{background:#eef6ff;color:#0b5f82}
    .links{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
    .link-chip{
      background:#eef6ff;color:#0b5f82;padding:8px 12px;border-radius:999px;font-weight:600;display:inline-flex;align-items:center;gap:8px
    }
    .dua{background:#f8fafc;border:1px solid #eef2f7;border-radius:14px;padding:12px;margin:8px 0}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .counter{
      display:flex;align-items:center;justify-content:space-between;gap:10px;background:#f8fffb;border:1px solid #e8f7ee;
      border-radius:14px;padding:14px;margin:10px 0
    }
    .counter .label{font-weight:700}
    .counter .value{font-size:22px;font-weight:800}
    .counter .controls{display:flex;gap:8px;flex-wrap:wrap}
    .pill{padding:8px 12px;border-radius:12px;border:1px solid #e5e7eb;background:#fff;cursor:pointer}
    .pill:hover{background:#f3f4f6}
    .cards{display:grid;gap:12px;grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}
    .card-sm{background:#e8f7ee;border:1px solid #eef2f7;border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:10px}
    .card-sm .title{font-weight:700;color:#0b5f82}
    .card-sm .text{font-size:15px}

 #azkar .card-sm,
    #duas .card-sm {
      max-height: 200px;   /* ارتفاع ثابت */
      overflow-y: auto;    /* Scroll داخلي */
      scrollbar-width: thin;
      scrollbar-color: var(--primary) #f1f5f9;
    }
    
    #azkar .card-sm::-webkit-scrollbar,
    #duas .card-sm::-webkit-scrollbar {
      width: 6px;
    }
    
    #azkar .card-sm::-webkit-scrollbar-thumb,
    #duas .card-sm::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 4px;
    }

    .tree{
      background:linear-gradient(180deg,#e6fffb 0,#fafffd 100%);border-radius:var(--radius);
      border:1px solid #d7f3ee;padding:10px;position:relative;overflow:hidden
    }
    svg{max-width:100%;height:auto;display:block;margin:auto}
    .leaf{cursor:pointer;transition:transform .15s ease}
    .leaf:hover{transform:scale(1.07)}
    .stat{display:flex;align-items:center;gap:8px;background:#fff;border:1px solid #eef2f7;border-radius:12px;padding:8px 12px;width:max-content}
    .donate-buttons{display:flex;flex-wrap:wrap;gap:10px}
    footer{margin:26px 0 10px;text-align:center;color:var(--muted)}
    /* Layout areas */
    .span-12{grid-column:span 12}
    .span-6{grid-column:span 6}
    .span-4{grid-column:span 4}
    .span-3{grid-column:span 3}
    @media (max-width: 1024px){
      .span-6{grid-column:span 12}
      .span-4{grid-column:span 6}
      .span-3{grid-column:span 6}
    }
    @media (max-width: 640px){
      .grid{gap:14px}
      .span-4,.span-3{grid-column:span 12}
    }
    
  </style>
</head>
<body>
  <header class="hero">
    <div class="wrap">
      <h1>صدقة جارية لروح المتوفين (رحمهم الله)</h1>
    <div class="names-grid-fixed">
            <h5>الحاج يوسف عبدالفتاح بكر</h5>
            <h5>الحاجه ام كلثوم محمد اللبودي</h5>

            <h5>الحاج أحمد محمد اللبودي</h5>
            <h5>الحاجه امال علي داوود</h5>
      </div>
      <p>اللهم اجعلهم في الفردوس الأعلى، وانفعهم بكل ذكر ودعاء وعمل صالح يُنشر من خلال هذا الموقع.</p>
    </div>
  
  </header>

  <main class="wrap">
    <section class="grid">
      <!-- القرآن الكريم -->
      <div class="card span-6" id="quran">
        <h2>القرآن الكريم</h2>
        <p class="muted">روابط للتلاوة والاستماع والقراءة.</p>
        <div class="links">
          <a class="link-chip" href="https://quran.com" target="_blank" rel="noopener" aria-label="فتح موقع Quran.com">تلاوة عبر Quran.com</a>
          <a class="link-chip" href="https://www.qurancomplex.gov.sa/kfgqpc-quran-ayah/" target="_blank" rel="noopener" aria-label="فتح مصحف المدينة">مصحف المدينة</a>
          <a class="link-chip" href="https://tanzil.net/#1:1" target="_blank" rel="noopener" aria-label="فتح موقع تنزيل">موقع تنزيل</a>
        </div>

    <!-- سور القرآن الكريم -->
    <div class="card span-6" id="suwar">
      <h2>سور من القرآن الكريم</h2>
      <p class="muted">تلاوة بصوت الشيخ عبدالباسط عبدالصمد</p>
      <div class="cards" id="surahCards"></div>
    </div>

        
        <div class="dua">
          <strong>دعاء للمتوفين:</strong><br>
          اللهم اغفر لهم وارحمهم وعافهم واعفُ عنهم، وأكرم نُزلهم ووسِّع مُدخلهم، واجعل قبرهم روضة من رياض الجنة.
        </div>
      </div>

      <!-- مؤقت تسبيح -->
      <div class="card span-6" id="tasbeeh">
        <h2>مؤقت وعداد تسبيح</h2>
        <p class="muted"></p>
        <div class="counter">
          <div>
            <div class="label">سبحان الله</div>
            <div class="value" id="c-subhan">0</div>
          </div>
          <div class="controls">
            <button class="pill" data-key="subhan" data-delta="1">+1</button>
            <button class="pill" data-key="subhan" data-delta="-1">-1</button>
            <button class="pill" data-key="subhan" data-reset>تصفير</button>
          </div>
        </div>
        <div class="counter">
          <div>
            <div class="label">الحمد لله</div>
            <div class="value" id="c-hamd">0</div>
          </div>
          <div class="controls">
            <button class="pill" data-key="hamd" data-delta="1">+1</button>
            <button class="pill" data-key="hamd" data-delta="-1">-1</button>
            <button class="pill" data-key="hamd" data-reset>تصفير</button>
          </div>
        </div>
        <div class="counter">
          <div>
            <div class="label">الله أكبر</div>
            <div class="value" id="c-akbar">0</div>
          </div>
          <div class="controls">
            <button class="pill" data-key="akbar" data-delta="1">+1</button>
            <button class="pill" data-key="akbar" data-delta="-1">-1</button>
            <button class="pill" data-key="akbar" data-reset>تصفير</button>
          </div>
        </div>
        <div class="counter">
          <div>
            <div class="label">لا إله إلا الله وحده لا شريك له له الملك وله الحمد وهو على كل شئ قدير</div>
            <div class="value" id="c-ha">0</div>
          </div>
          <div class="controls">
            <button class="pill" data-key="ha" data-delta="1">+1</button>
            <button class="pill" data-key="ha" data-delta="-1">-1</button>
            <button class="pill" data-key="ha" data-reset>تصفير</button>
          </div>
        </div>
        <div class="row">
          <button class="btn ghost" id="totalBtn">إجمالي الأجر: <span id="total">0</span></button>
          <button class="btn" id="exportTasbeeh">حفظ العدّادات</button>
        </div>
      </div>

      <!-- أدعية -->
      <div class="card span-6" id="duas">
        <h2>أدعية</h2>
        <p class="muted">أدعية مختارة</p>
        <div class="cards" id="duaCards"></div>
      </div>

      <!-- مكتبة أذكار تفاعلية -->
      <div class="card span-6" id="azkar">
        <h2>مكتبة الأذكار</h2>
        <p class="muted">أدعية وأذكار عن الرسول (ص)</p>
        <div class="cards" id="azkarCards"></div>
      </div>

      <!-- شجرة الأجر -->
      <div class="card span-12 tree" id="tree">
        <div class="row" style="justify-content:space-between;align-items:center;margin:6px 8px 12px">
          <h2 style="margin:0">شجرة الأجر التفاعلية</h2>
          <div class="stat"><strong>عدد الأوراق المباركة:</strong> <span id="leafCount">0</span></div>
        </div>
        <svg viewBox="0 0 700 320" role="img" aria-label="شجرة أجر">
          <!-- جذع -->
          <rect x="335" y="160" width="30" height="120" fill="#8b5a2b" rx="8"></rect>
          <!-- فروع -->
          <path d="M350 170 C 290 140, 260 120, 210 110" stroke="#8b5a2b" stroke-width="8" fill="none"/>
          <path d="M350 180 C 410 150, 450 130, 500 120" stroke="#8b5a2b" stroke-width="8" fill="none"/>
          <path d="M350 200 C 300 190, 260 200, 220 210" stroke="#8b5a2b" stroke-width="8" fill="none"/>
          <path d="M350 210 C 420 210, 470 220, 520 230" stroke="#8b5a2b" stroke-width="8" fill="none"/>
          <!-- أوراق -->
          <g id="leaves"></g>
        </svg>
        <p class="muted" style="margin:10px 8px 0">
          اضغط على الورق لاختيار ذكر عشوائي ويُضاف للأجر، وتُحفَظ النتائج محليًا.
        </p>
      </div>

      <!-- تبرعات -->
      <div class="card span-12" id="donate">
        <h2>التبرع السريع</h2>
        <p class="muted">اختر جهة موثوقة وافتح الرابط في تبويب جديد.</p>
        <div class="donate-buttons">
          <a class="btn" href="https://misrelkheir.org/ar/donation" target="_blank" rel="noopener" aria-label="فتح موقع مصر الخير للتبرع">مصر الخير</a>
          <a class="btn" href="https://baitzakat.org.eg/donationprogrames/#5" target="_blank" rel="noopener" aria-label="فتح موقع بيت الزكاة والصدقات   ">بيت الزكاة والصدقات</a>
          <a class="btn" href="https://www.resala.org/donate" target="_blank" rel="noopener" aria-label="فتح موقع رسالة للتبرع">رسالة</a>
          <a class="btn" href="https://baheya.org/ar/donate" target="_blank" rel="noopener" aria-label="فتح موقع بهية للتبرع">بهية</a>
          <a class="btn" href="https://www.57357.org/ar/donate" target="_blank" rel="noopener" aria-label="فتح موقع مستشفي 57357">57357</a>
          <a class="btn" href="https://www.myf-egypt.org/ar/donation/?gad_source=1&gad_campaignid=9975369735&gbraid=0AAAAACbTDCzSvt9ML6XtMTsHrAitFBGR2&gclid=Cj0KCQjw8eTFBhCXARIsAIkiuOxEvcxxi80mcAmfzS0A1RiEEqNM8OVTQz2kSm_RJlKPwlCM6hIETn4aAoRqEALw_wcB" target="_blank" rel="noopener" aria-label="فتح موقع مؤسسه مجدي يعقوب للقلب">مؤسسه مجدي يعقوب للقلب</a>
        </div>
      </div>
    </section>
  </main>

  <footer>
     نسألكم الدعاء للمتوفين بالرحمه والمغفره.
  </footer>

  <script>
      // 🔹 بيانات السور وروابط الـ MP3
  const SURAHS = [
    {
      name: "سورة الكهف",
      src: "https://server7.mp3quran.net/basit/Almusshaf-Al-Mojawwad/018.mp3"
    },
    {
      name: "سورة الملك",
      src: "https://server7.mp3quran.net/basit/Almusshaf-Al-Mojawwad/067.mp3"
    },
    {
      name: "سورة الرحمن",
      src: "https://server7.mp3quran.net/basit/Almusshaf-Al-Mojawwad/055.mp3"
    }
  ];

  const SQ = s => document.querySelector(s);
  const surahWrap = SQ("#surahCards");

  SURAHS.forEach((s, i) => {
    const el = document.createElement("div");
    el.className = "card-sm";
    el.innerHTML = `
      <div class="title">${s.name}</div>
      <div class="row">
        <audio id="audio-${i}" controls src="${s.src}"></audio>
      </div>
    `;
    surahWrap.appendChild(el);
  });

  // ---------- بيانات الأدعية والأذكار ----------
  const DUAS = [
    {cat:"", text:"اللهم انه لم يضر احد فلا تحرمه من جنتك ولذة النظر الي وجهك الكريم اللهم ارحمه بقد ما تمنينا له  في البقاء اللهم ازقه من النعيم وما وعدت به المؤمنين اللهم ارحمه واجعله من الضاحكين المستبشرين بجنتك يارب العالمين  اللهم اغفر له بعدد ما سبح خلقك وبعدد ما لبي حجاجك يارب يا رحيم."},
    {cat:"", text:"اللهمّ يمّن كتابهم، ويسّر حسابهم، وثقّل بالحسنات ميزانهم، وثبّت على الصّراط أقدامهم، وأسكنهم في أعلى الجنّات، بجوار حبيبك ومصطفاك صلّى الله عليه وسلّم. اللهمّ أمّنهم من فزع يوم القيامة، ومن هول يوم القيامة، واجعلهم نفسه آمنةً مطمئنّةً، ولقّنهم حجّتهم. اللهمّ اجعلهم في بطن القبر مطمئنّين، وعند قيام الأشهاد آمنين، وبجود رضوانك واثقين، وإلى أعلى درجاتك سابقين."},
      {cat:"", text:"اللهمّ افسح لهم في قبرهم مدّ بصرهم، وافرش قبرهم من فراش الجنّة. اللهمّ أعذهم من عذاب القبر، وجفاف ِالأرض عن جنبيهم. اللهمّ املأ قبرهم بالرّضا، والنّور، والفسحة، والسّرور. اللهمّ إنّهم في ذمّتك وحبل جوارك، فقِهِم فتنة القبر، وعذاب النّار، وأنت أهل الوفاء والحقّ، فاغفر لهم وارحمهم، إنّك أنت الغفور الرّحيم."},
      {cat:"", text:"اللهم اجزهم عن الاحسان احسانا وعن الاسائه عفو وغفرانا واللهم ان كانوا محسنين فزد من حسناتهم وان كانوا مسيئين فتجاوز عن سيئاتهم واللهم ادخلهم الجنه من غير  مناقشه حساب ولا سابقه عذاب واللهم آنسهم في وحدتهم وفي وحشتهم وفي غربتهم"},
      {cat:"", text:"(اللهم أنت ربهم، وأنت خلقتهم، وأنت هديتهم للإسلام، وأنت قبضت أرواحهم، وأنت أعلم بسرهم وعلانيتهم، جئنا شفعاء فاغفر لهم، اللهمّ أبدلهم داراً خيراً من دارهم، وأهلاً خيراً من أهلهم، وأدخلهم الجنّة، وأعذهم من عذاب القبر، ومن عذاب النّار. اللهمّ عاملهم بما أنت أهله، ولا تعاملهم بما هم أهله."},
      {cat:"", text:" 'اللهمّ إنّهم كانوا لكتابك تاليين وسامعين، فشفّع فيهم القرآن، وارحمهم من النّيران، واجعلهم يا رحمن يرتقوا في الجنّة إلى آخر آية قرؤها أو سمعوها، اللهمّ ارزقهم بكلّ حرفٍ في القرآن حلاوةً، وبكلّ كلمة كرامةً، وبكلّ اّية سعادةً، وبكلّ سورة سلامةً، وبكل جُزءٍ جزاءً، اللهمّ إنّهم صبروا على البلاء فلم يجزعو، فامنحهم درجة الصّابرين، الذين يوفّون أجورهم بغير حساب، فإنّك القائل: 'إنّما يوفّى الصّابرون أجرهم بغير حساب."}
    ];

    const AZKAR = [
      {title:"", text:"اللّهـمَّ أَنْتَ رَبِّـي لا إلهَ إلاّ أَنْتَ ، خَلَقْتَنـي وَأَنا عَبْـدُك ، وَأَنا عَلـى عَهْـدِكَ وَوَعْـدِكَ ما اسْتَـطَعْـت ، أَعـوذُبِكَ مِنْ شَـرِّ ما صَنَـعْت ، أَبـوءُ لَـكَ بِنِعْـمَتِـكَ عَلَـيَّ وَأَبـوءُ بِذَنْـبي فَاغْفـِرْ لي فَإِنَّـهُ لا يَغْـفِرُ الذُّنـوبَ إِلاّ أَنْتَ."},
      {title:"", text:"اللَّهُمَّ أَنْتَ رَبِّي لا إِلَهَ إِلا أَنْتَ ، عَلَيْكَ تَوَكَّلْتُ ، وَأَنْتَ رَبُّ الْعَرْشِ الْعَظِيمِ , مَا شَاءَ اللَّهُ كَانَ ، وَمَا لَمْ يَشَأْ لَمْ يَكُنْ ، وَلا حَوْلَ وَلا قُوَّةَ إِلا بِاللَّهِ الْعَلِيِّ الْعَظِيمِ , أَعْلَمُ أَنَّ اللَّهَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ ، وَأَنَّ اللَّهَ قَدْ أَحَاطَ بِكُلِّ شَيْءٍ عِلْمًا , اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنْ شَرِّ نَفْسِي ، وَمِنْ شَرِّ كُلِّ دَابَّةٍ أَنْتَ آخِذٌ بِنَاصِيَتِهَا ، إِنَّ رَبِّي عَلَى صِرَاطٍمُسْتَقِيمٍ."},
      {title:"", text:"اللهم إني أعوذ بك من العجز والكسل، والجبن والبخل،  والهرم وعذاب القبر، اللهم آت نفسي تقواها، وزكها أنت خير من زكاها، أنت وليها ومولاها اللهم إني أعوذ بك من علم لا ينفع ومن قلب لا يخشع، ومن نفس لا تشبع، ومن دعوة لا يستجاب لها"},
      {title:"", text:"اللهم لك أسلمت، وبك آمنت، وعليك توكلت، وإليك خاصمت، وبك حاكمت، فاغفر لي ما قدمت وما أخرت، وأسررت وأعلنت، وما أنت أعلم به مني،لاإله إلا أنت"}

    ];

    const RANDOM_AZKAR = [
      "سبحان الله", "الحمد لله", "الله أكبر", "لا إله إلا الله",
      "لا حول ولا قوة إلا بالله", "سبحان الله وبحمده", "أستغفر الله العظيم"
    ];

    // ---------- أدوات عامة ----------
    const qs = s => document.querySelector(s);
    const qsa = s => [...document.querySelectorAll(s)];
    const save = (k,v)=>localStorage.setItem(k,JSON.stringify(v));
    const load = (k,def)=>{try{const v=JSON.parse(localStorage.getItem(k));return v??def;}catch{return def;}};

    // ---------- عدّاد التسبيح ----------
    const counts = load("tasbeeh-counts",{subhan:0,hamd:0,akbar:0,ha:0});
    function renderCounts(){
      qs("#c-subhan").textContent = counts.subhan;
      qs("#c-hamd").textContent   = counts.hamd;
      qs("#c-akbar").textContent  = counts.akbar;
      qs("#c-ha").textContent  = counts.ha;
      qs("#total").textContent    = counts.subhan + counts.hamd + counts.akbar + counts.ha;
    }
    renderCounts();

    qsa("#tasbeeh .controls .pill").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const key = btn.dataset.key;
        if(btn.hasAttribute("data-reset")) counts[key]=0;
        else counts[key] = Math.max(0, counts[key] + parseInt(btn.dataset.delta,10));
        save("tasbeeh-counts",counts);
    -    renderCounts();
      });
    });

    qs("#exportTasbeeh").addEventListener("click",()=>{
      const data = [
        `سبحان الله: ${counts.subhan}`,
        `الحمد لله: ${counts.hamd}`,
        `الله أكبر: ${counts.akbar}`,
        `لا إله إلا الله وحده لا شريك له، له الملك وله الحمد وهو على كل شيء قدير: ${counts.ha}`,
        `الإجمالي: ${counts.subhan+counts.hamd+counts.akbar+counts.ha}`
      ].join("\n");
      const blob = new Blob([data],{type:"text/plain;charset=utf-8"});
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "tasbeeh_counts.txt";
      a.click();
      URL.revokeObjectURL(a.href);
    });

    // ---------- بطاقات الأدعية ----------
    const duaWrap = qs("#duaCards");
    DUAS.forEach((d,i)=>{
      const el = document.createElement("div");
      el.className = "card-sm";
      el.innerHTML = `
        <div class="title">${d.cat}</div>
        <div class="text">${d.text}</div>
        <div class="row">
          <button class="pill copy-btn">نسخ</button>
        </div>
      `;
      el.querySelector(".copy-btn").addEventListener("click", ()=>{
        navigator.clipboard.writeText(d.text).then(()=>{
          const b = el.querySelector(".copy-btn");
          const old = b.textContent;
          b.textContent = "✓ تم النسخ";
          setTimeout(()=>b.textContent = old, 1500);
        });
      });
      duaWrap.appendChild(el);
    });

    // ---------- مكتبة الأذكار ----------
    const azkarWrap = qs("#azkarCards");
    AZKAR.forEach(z=>{
      const el = document.createElement("div");
      el.className = "card-sm";
      el.innerHTML = `
        <div class="title">${z.title}</div>
        <div class="text">${z.text}</div>
        <div class="row">
          <button class="pill copy">نسخ الذكر</button>
        </div>
      `;
      el.querySelector(".copy").addEventListener("click", ()=>{
        navigator.clipboard.writeText(z.text).then(()=>{
          const b = el.querySelector(".copy");
          const old = b.textContent;
          b.textContent = "✓ تم النسخ";
          setTimeout(()=>b.textContent = old, 1500);
        });
      });
      azkarWrap.appendChild(el);
    });

    // ---------- شجرة الأجر التفاعلية ----------
    const leavesGroup = qs("#leaves");
    const leafCountEl = qs("#leafCount");
    const treeState = load("tree-leaves",{count:0});
    leafCountEl.textContent = treeState.count;

    // توليد أوراق في أماكن مختلفة
    function makeLeaf(cx, cy){
      const g = document.createElementNS("http://www.w3.org/2000/svg","g");
      g.setAttribute("class","leaf");
      const path = document.createElementNS("http://www.w3.org/2000/svg","path");
      path.setAttribute("d","M0 0 C 12 -8, 28 -8, 36 0 C 28 8, 12 8, 0 0 Z");
      path.setAttribute("fill","#22c55e");
      g.setAttribute("transform",`translate(${cx} ${cy}) rotate(${(Math.random()*40-20).toFixed(1)})`);
      g.appendChild(path);

      g.addEventListener("click", ()=>{
        // اختيار ذكر عشوائي
        const dhikr = RANDOM_AZKAR[Math.floor(Math.random()*RANDOM_AZKAR.length)];
        // زيادة عداد الإجمالي + إظهار تلميح
        treeState.count += 1; save("tree-leaves",treeState);
        leafCountEl.textContent = treeState.count;

        // إضافة للعدّادات إذا ينطبق
        if(dhikr==="سبحان الله") counts.subhan++;
        else if(dhikr==="الحمد لله") counts.hamd++;
        else if(dhikr==="الله أكبر") counts.akbar++;
        else if(dhikr==="لا إله إلا الله وحده لا شريك له له الملك وله الحمد وهو على كل شئ قدير") counts.ha++;
        save("tasbeeh-counts",counts); renderCounts();

        // توست بسيط
        const toast = document.createElement("div");
        toast.textContent = `ذكرت: ${dhikr} ✓`;
        Object.assign(toast.style,{
          position:"fixed",left:"50%",transform:"translateX(-50%)",
          bottom:"22px",background:"#0ea5e9",color:"#fff",padding:"10px 14px",
          borderRadius:"12px",boxShadow:"var(--shadow)",zIndex:99,fontWeight:"700"
        });
        document.body.appendChild(toast);
        setTimeout(()=>toast.remove(),1500);
      });

      leavesGroup.appendChild(g);
    }

    // توزيع إحداثيات الأوراق
    const coords = [
      [190,100],[220,120],[250,90],[280,110],[310,95],
      [390,95],[420,120],[450,100],[480,115],[510,95],
      [240,200],[270,185],[300,205],[410,205],[450,195],[490,210]
    ];
    coords.forEach(([x,y])=>makeLeaf(x,y));

    // ---------- تحسين الوصول ----------
    // زر إظهار الإجمالي (محفّز لإعادة الحساب)
    qs("#totalBtn").addEventListener("click", ()=>renderCounts());

    // ---------- تخصيص الاسم (اختياري) ----------
    // يمكنك تعديل العنوان بسرعة بإضافة ?name=اسم
    (function setNameFromQuery(){
      const params = new URLSearchParams(location.search);
      const name = params.get("name");
      if(name){
        document.title = `صدقة جارية لروح ${name}`;
        const h1 = document.querySelector(".hero h1");
        h1.textContent = `صدقة جارية لروح ${name} (رحمها الله)`;
      }
    })();
  </script>
</body>
</html>

